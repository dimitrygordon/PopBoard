<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>PopBoard</title>
  <link rel="icon" type="image/png" sizes="any" href="/popboard-logo.png" />
  <link rel="shortcut icon" type="image/png" href="/popboard-logo.png" />
  <link rel="apple-touch-icon" sizes="180x180" href="/popboard-logo.png" />
  <link rel="stylesheet" href="style.css" />
</head>
<body>

<!-- Login Section -->
<div id="login">
  <div class="login-logo">
    <img src="/popboard-logo.png" alt="PopBoard Logo" id="login-logo-img" />
  </div>
  <h2>Join PopBoard</h2>
  <input id="usernameInput" placeholder="Your name" />
  <input id="boardNameInput" placeholder="PopBoard name" />
  <input id="studentPasswordInput" type="password" placeholder="Password (protects your account)" />
  <div class="login-buttons">
    <button id="joinBtn">Join</button>
  </div>
  <p style="text-align:center;margin-top:16px;font-size:0.85rem;opacity:0.6;">
    <a id="teacherLoginBtn" href="#" style="color:inherit;text-decoration:underline;cursor:pointer;">Teacher? Sign in here</a>
  </p>
</div>

<!-- Teacher Login -->
<div id="teacherLogin" class="hidden">
  <div class="login-logo">
    <img src="/popboard-logo.png" alt="PopBoard Logo" id="teacher-logo-img" />
  </div>
  <h2>Teacher Login</h2>
  <input id="teacherNameInput" placeholder="Teacher name" />
  <input id="teacherPasswordInput" type="password" placeholder="Password" />
  <div class="login-buttons">
    <button id="teacherSignInBtn">Sign In</button>
    <button id="backToMainLoginBtn" class="secondary-btn">Back</button>
  </div>
</div>

<!-- PopBoards Portal (Teacher) -->
<div id="boardsPortal" class="hidden">
  <header>
    <div id="logo">
      <img src="/popboard-logo.png" alt="PopBoard Logo" id="logo-img" loading="lazy" />
    </div>
    <div class="header-right">
      <button id="logoutBtnPortal">Logout</button>
      <button id="themeTogglePortal">ğŸŒ™ Dark Mode</button>
    </div>
  </header>
  <div class="portal-container">
    <h2>Your PopBoards</h2>
    <div class="create-board-section">
      <input id="newBoardNameInput" placeholder="New PopBoard name" />
      <button id="createBoardBtn">Create PopBoard</button>
    </div>
    <div id="boardsList"></div>
  </div>
</div>

<!-- Students Portal (Teacher) -->
<div id="studentsPortal" class="hidden">
  <header>
    <div id="logo">
      <img src="/popboard-logo.png" alt="PopBoard Logo" id="logo-img" loading="lazy" />
    </div>
    <div class="header-right">
      <button id="backToBoardFromStudents">Back to Board</button>
      <button id="logoutBtnStudents">Logout</button>
      <button id="themeToggleStudents">ğŸŒ™ Dark Mode</button>
    </div>
  </header>
  <div class="portal-container">
    <h2>Students</h2>
    <div style="text-align:center;margin-bottom:16px;">
      <button id="dailyDataToggleBtn" class="teacher-control">ğŸ‘ï¸â€ğŸ—¨ï¸ Daily Data Hidden</button>
    </div>
    <div id="studentsList"></div>
  </div>
</div>

<!-- Student Dashboard -->
<div id="studentDashboard" class="hidden">
  <header>
    <div id="logo">
      <img src="/popboard-logo.png" alt="PopBoard Logo" id="logo-img" loading="lazy" />
    </div>
    <div class="header-right">
      <button id="backToStudentsFromDashboard">Back to Students</button>
      <button id="logoutBtnDashboard">Logout</button>
      <button id="themeToggleDashboard">ğŸŒ™ Dark Mode</button>
    </div>
  </header>
  <div class="portal-container">
    <div id="dashboardContent"></div>
  </div>
</div>

<!-- Main App -->
<div id="app" class="hidden">
  <header>
    <div id="logo">
      <img src="/popboard-logo.png" alt="PopBoard Logo" id="logo-img" loading="lazy" />
    </div>
    <div class="header-right">
      <div class="header-top-row">
        <button id="backToPortalBtn" class="hidden">Back to Boards</button>
        <button id="studentsBtn" class="hidden">Students</button>
        <button id="teacherBtn" class="hidden">Poll</button>
      </div>
      <div class="header-bottom-row">
        <button id="logoutBtnApp">Logout</button>
        <button id="themeToggle">ğŸŒ™ Dark Mode</button>
      </div>
    </div>
  </header>

  <!-- Teacher Poll Creation (top, above everything) -->
  <section id="pollCreation" class="hidden"></section>

  <!-- Teacher: Leaderboard visibility toggle -->
  <div id="leaderboardToggleContainer" class="hidden" style="text-align:center; margin-bottom:12px;">
    <button id="leaderboardVisibilityBtn" class="teacher-control">ğŸ‘ï¸ Leaderboard Shown</button>
  </div>

  <!-- Leaderboard -->
  <section id="leaderboardSection"></section>

  <!-- Student emoji picker + nickname (students only) -->
  <div id="emojiPickerContainer" class="hidden">
    <div class="leaderboard-identity-group">
      <div id="emojiCircle" title="Click to choose your emoji">
        <span id="emojiDisplay">Choose Emoji</span>
      </div>
      <div id="nicknameInputContainer"></div>
    </div>
    <input id="emojiInput" maxlength="2" placeholder="" />
  </div>

  <!-- Poll Section -->
  <section id="pollSection"></section>

  <!-- Teacher Panel -->
  <section id="teacherPanel" class="hidden">
    <div id="upvote-history-container" class="teacher-panel">
      <h3>Upvote History</h3>
      <div id="upvote-history-log" class="history-log"></div>
    </div>
  </section>

  <!-- Daily Dashboard (teacher only) -->
  <section id="dailyDashboard" class="hidden">
    <div class="daily-dashboard-card">
      <h3>ğŸ“Š Daily Dashboard</h3>
      <div id="dailyEngagementDisplay" class="daily-engagement-big"></div>
      <div id="dailyMetricsText" class="daily-metrics-text"></div>
    </div>
  </section>

  <!-- New Post Section -->
  <section id="newPost">
    <textarea id="postInput" placeholder="Write a comment..."></textarea>
    <div class="post-options">
      <input type="checkbox" id="anonymousToggle" />
      <label for="anonymousToggle">ğŸ¥·ğŸ¼ Anonymous</label>
      <input type="file" id="postImageInput" accept="image/*" style="display:none;" />
      <button id="postImageBtn" class="secondary-btn" style="padding: 8px 16px; font-size: 0.85rem;">ğŸ“· Add Image</button>
    </div>
    <div id="postImagePreview" class="image-preview"></div>
    <button id="postBtn">Post</button>
  </section>

  <!-- Sorting -->
  <section id="sortSection">
    <select id="sortSelect">
      <option value="new">Newest</option>
      <option value="top">Top</option>
    </select>
  </section>

  <!-- Posts -->
  <section id="posts"></section>

  <!-- Archived Comments (hidden primary comments, teacher only) -->
  <section id="archivedComments"></section>

  <!-- Archived Polls (hidden + interacted, teacher only) -->
  <section id="archivedPolls"></section>

</div>

<script type="module" src="app.js"></script>
</body>
</html>
