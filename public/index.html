<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>PopBoard</title>
  
  <!-- Favicon and app icons with explicit types -->
  <link rel="icon" type="image/png" sizes="any" href="/popboard-logo.png" />
  <link rel="shortcut icon" type="image/png" href="/popboard-logo.png" />
  <link rel="apple-touch-icon" sizes="180x180" href="/popboard-logo.png" />
  
  <link rel="stylesheet" href="style.css" />
</head>
<body>

<!-- Login Section (Initial Page) -->
<div id="login">
  <div class="login-logo">
    <img src="/popboard-logo.png" alt="PopBoard Logo" id="login-logo-img" />
  </div>
  <h2>Join PopBoard</h2>
  <input id="usernameInput" placeholder="Enter your name" />
  <div class="login-buttons">
    <button id="joinBtn">Join</button>
    <button id="teacherLoginBtn">Teacher</button>
  </div>
</div>

<!-- Teacher Login (Password Entry) -->
<div id="teacherLogin" class="hidden">
  <div class="login-logo">
    <img src="/popboard-logo.png" alt="PopBoard Logo" id="teacher-logo-img" />
  </div>
  <h2>Teacher Login</h2>
  <input id="teacherNameInput" placeholder="Teacher name" />
  <input id="teacherPasswordInput" type="password" placeholder="Password" />
  <div class="login-buttons">
    <button id="teacherSignInBtn">Sign In</button>
    <button id="backToMainLoginBtn" class="secondary-btn">Back</button>
  </div>
</div>

<!-- Board Name Entry -->
<div id="boardNameEntry" class="hidden">
  <div class="login-logo">
    <img src="/popboard-logo.png" alt="PopBoard Logo" id="boardname-logo-img" />
  </div>
  <h2>Enter PopBoard Name</h2>
  <input id="boardNameInput" placeholder="PopBoard name" />
  <div class="login-buttons">
    <button id="enterBoardBtn">Enter</button>
    <button id="backToLoginBtn" class="secondary-btn">Back</button>
  </div>
</div>

<!-- PopBoards Portal (Teacher View) -->
<div id="boardsPortal" class="hidden">
  <header>
    <div id="logo">
      <img src="/popboard-logo.png" alt="PopBoard Logo" id="logo-img" loading="lazy" />
    </div>
    <div class="header-right">
      <button id="logoutBtnPortal">Logout</button>
      <button id="themeTogglePortal">ğŸŒ™ Dark Mode</button>
    </div>
  </header>
  
  <div class="portal-container">
    <h2>Your PopBoards</h2>
    <div class="create-board-section">
      <input id="newBoardNameInput" placeholder="New PopBoard name" />
      <button id="createBoardBtn">Create PopBoard</button>
    </div>
    <div id="boardsList"></div>
  </div>
</div>

<!-- Main App (Inside a PopBoard) -->
<div id="app" class="hidden">

  <!-- Header -->
  <header>
    <div id="logo">
      <img src="/popboard-logo.png" alt="PopBoard Logo" id="logo-img" loading="lazy" />
    </div>
    <div class="header-right">
      <button id="backToPortalBtn" class="hidden">Back to Boards</button>
      <button id="teacherBtn" class="hidden">Teacher Panel</button>
      <button id="logoutBtnApp">Logout</button>
      <button id="themeToggle">ğŸŒ™ Dark Mode</button>
    </div>
  </header>

  <!-- Teacher Poll Creation (appears at top when creating poll) -->
  <section id="pollCreation" class="hidden"></section>

  <!-- Poll Section -->
  <section id="pollSection"></section>

  <!-- Teacher Panel (teacher-only, toggled via JS) -->
  <section id="teacherPanel" class="hidden">
    <!-- Teacher tools injected via JS -->
    <div id="upvote-history-container" class="teacher-panel">
      <h3>Upvote History</h3>
      <div id="upvote-history-log" class="history-log"></div>
    </div>
  </section>

  <!-- New Post Section -->
  <section id="newPost">
    <textarea id="postInput" placeholder="Write a comment..."></textarea>
    <div class="post-options">
      <input type="checkbox" id="anonymousToggle" />
      <label for="anonymousToggle">ğŸ¥·ğŸ¼ Anonymous</label>
      <input type="file" id="postImageInput" accept="image/*" style="display:none;" />
      <button id="postImageBtn" class="secondary-btn" style="padding: 8px 16px; font-size: 0.85rem;">ğŸ“· Add Image</button>
    </div>
    <div id="postImagePreview" class="image-preview"></div>
    <button id="postBtn">Post</button>
  </section>

  <!-- Sorting Options -->
  <section id="sortSection">
    <select id="sortSelect">
      <option value="new">Newest</option>
      <option value="top">Top</option>
    </select>
  </section>

  <!-- Posts Container -->
  <section id="posts"></section>

</div>

<!-- App JS -->
<script type="module" src="app.js"></script>

</body>
</html>
